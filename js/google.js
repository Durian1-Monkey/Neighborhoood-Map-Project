
function initMap(){var e={lat:13.747174,lng:100.534907};map=new google.maps.Map(document.getElementById("map"),{zoom:12,center:e,mapTypeId:google.maps.MapTypeId.TERRAIN,mapTypeControl:!0,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.HORIZONTAL_BAR,position:google.maps.ControlPosition.RIGHT_TOP}});for(var o=locations.length,n=0;o>n;n++){var i=locations[n];addMarker(i)}ko.applyBindings(new ViewModel),bounds=new google.maps.LatLngBounds,infoWindow=new google.maps.InfoWindow}function addMarker(e){function o(){null!==e.marker.getAnimation()?e.marker.setAnimation(null):(e.marker.setAnimation(google.maps.Animation.BOUNCE),console.log("bound?"),setTimeout(e.marker.setAnimation(null),700))}function n(o){var n="http://en.wikipedia.org/w/api.php?action=opensearch&search="+o+"&format=json&callback=wikiCallback";console.log(n);var i=localStorage.getItem(e.Name);if(null===i){var a=setTimeout(function(){var e=document.getElementById("content");e.innerHTML="Failed to get wikipedia resources"},3e3);return $.ajax({url:n,dataType:"jsonp",jsonp:"callback",success:function(o){for(var n=o[1],i=0;i<n.length;i++){articleStr=n[i];var t="http://en.wikipedia.org/wiki/"+articleStr,r='<li><a href="'+t+'">'+articleStr+"</a></li>",s=document.getElementById("content");localStorage.setItem(e.Name,r),s.innerHTML=r}console.log(r),clearTimeout(a)}}),!1}console.log("hello"),infoWindow.setContent(e.Name+"<br><br>"+e.description+'<br><br><div id ="content">'+i+"</div>")}iconBase="icon.png",marker=new google.maps.Marker({position:new google.maps.LatLng(e.lat,e.lng),map:map,title:e.Name,draggable:!0,animation:google.maps.Animation.DROP,icon:iconBase}),e.marker=marker,markers.push(marker),google.maps.event.addListener(marker,"click",function(){infoWindow.setContent(e.Name+"<br><br>"+e.description+'<br><br><div id ="content"></div>'),o(),n(e.Name),infoWindow.open(map,e.marker),map.panTo(marker.getPosition())})}var map,markers=[],marker,iconBase,infoWindow,bounds,locations=[{Name:"Terminal 21",lat:"13.737920",lng:"100.560416",description:"You can buy whatever you want here. </br>I often come here to buy books and small presents for my pals and family members. </br>This shopping mall is easy to access from BTS Asok.Termial 21 is for shopping and cheap items and cloths and suveniors. The products are a bit pricy for foreigners to be compared with local products. My fried bought my present here."},{Name:"Wat Arun",lat:"13.743719",lng:"100.489876",description:"Entrance fee 50 BTH. </br>We should visit here in the early morning."},{Name:"Lumphini Park",lat:"13.730026",lng:"100.541199",description:"One of the biggest park in Bangkok. </br>People enjoy playing out here. </br>I love to sing and dance with my favorite musics."},{Name:"Chatuchak Weekend Market",lat:"13.799994",lng:"100.550568",description:"This is the big market in Bangkok. </br>You can find many interesting things which might be expensive if you bought at shopping malls"},{Name:"Wat Pho",lat:"13.746919",lng:"100.492738",description:"My Thai friend invited me to go sightseeing here. </br>Inside the temple, the big guy is laying down to relax!! </br>And many people visit here to look at him every day."},{Name:"Wat Suthat",lat:"13.752400",lng:"100.501120",description:"This is a royal temple of the first grade. </br>I have never been to here yet."},{Name:"Chao Phraya River",lat:"13.726736",lng:"100.512698",description:"This is the first grade river in Thai. </br>You can enjoy a boat cruise tour."}],ViewModel=function(){var e=this;e.Locates=function(e){google.maps.event.trigger(e.marker,"click")},e.query=ko.observable(""),e.search=ko.computed(function(){return ko.utils.arrayFilter(locations,function(o){return o.Name.toLowerCase().indexOf(e.query().toLowerCase())>=0?(o.marker.setVisible(!0),!0):void infoWindow.close()})}),e.menuVisibility=ko.observable(!1),e.toggleMenu=function(){e.menuVisibility(!e.menuVisibility())}},menu=document.querySelector("#menu"),main=document.querySelector("main"),drawer=document.querySelector("#drawer");menu.addEventListener("click",function(e){drawer.classList.toggle("open"),e.stopPropagation()}),main.addEventListener("click",function(){drawer.classList.remove("open")});