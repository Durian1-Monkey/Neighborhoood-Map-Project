
function initMap(){var e={lat:13.747174,lng:100.534907};map=new google.maps.Map(document.getElementById("map"),{zoom:12,center:e,mapTypeId:google.maps.MapTypeId.TERRAIN,mapTypeControl:!0,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.HORIZONTAL_BAR,position:google.maps.ControlPosition.RIGHT_TOP}});for(var o=locations.length,t=0;o>t;t++){var n=locations[t];addMarker(n)}ko.applyBindings(new ViewModel)}function addMarker(e){function o(){null!==e.marker.getAnimation()?e.marker.setAnimation(null):(e.marker.setAnimation(google.maps.Animation.BOUNCE),console.log("bound?"),setTimeout(e.marker.setAnimation(null),700))}function t(o){for(var t=setTimeout(function(){var e=document.getElementById("content"),o="Failed to get wikipedia resources";localStorage.setItem("error",o);localStorage.getItem("error");e.innerHTML="Failed to get wikipedia resources"},8e3),n=0;n<locations.length;n++){articleStr=o;var a="http://en.wikipedia.org/wiki/"+articleStr,i='<li><a href="'+a+'">'+articleStr+"</a></li>";localStorage.setItem("articlelink",i);var r=localStorage.getItem("articlelink");console.log(r),infoWindow.setContent(e.Name+"<br><br>"+e.description+'<br><br><div id ="content">'+r+"</div>")}return clearTimeout(t),!1}iconBase="icon.png",marker=new google.maps.Marker({position:new google.maps.LatLng(e.lat,e.lng),map:map,title:e.Name,draggable:!0,animation:google.maps.Animation.DROP,icon:iconBase}),e.marker=marker,markers.push(marker),infoWindow=new google.maps.InfoWindow,google.maps.event.addListener(marker,"click",function(){o(),t(e.Name),infoWindow.open(map,e.marker),map.panTo(marker.getPosition())})}function detectBrowser(){var e=navigator.userAgent,o=document.getElementById("map");-1!=e.indexOf("iPhone")||-1!=e.indexOf("Android")?(o.style.width="100%",o.style.height="100%"):(o.style.width="600px",o.style.height="800px")}var map,markers=[],marker,iconBase,infoWindow,locations=[{Name:"Terminal 21",lat:"13.737920",lng:"100.560416",description:"You can buy whatever you want here. </br>I often come here to buy books and small presents for my pals and family members. </br>This shopping mall is easy to access from BTS Asok.Termial 21 is for shopping and cheap items and cloths and suveniors. The products are a bit pricy for foreigners to be compared with local products. My fried bought my present here."},{Name:"Wat Arun",lat:"13.743719",lng:"100.489876",description:"Entrance fee 50 BTH. </br>We should visit here in the early morning."},{Name:"Lumphini Park",lat:"13.730026",lng:"100.541199",description:"One of the biggest park in Bangkok. </br>People enjoy playing out here. </br>I love to sing and dance with my favorite musics."},{Name:"Chatuchak Weekend Market",lat:"13.799994",lng:"100.550568",description:"This is the big market in Bangkok. </br>You can find many interesting things which might be expensive if you bought at shopping malls"},{Name:"Wat Pho",lat:"13.746919",lng:"100.492738",description:"My Thai friend invited me to go sightseeing here. </br>Inside the temple, the big guy is laying down to relax!! </br>And many people visit here to look at him every day."},{Name:"Wat Suthat",lat:"13.752400",lng:"100.501120",description:"This is a royal temple of the first grade. </br>I have never been to here yet."},{Name:"Chao Phraya River",lat:"13.726736",lng:"100.512698",description:"This is the first grade river in Thai. </br>You can enjoy a boat cruise tour."}],ViewModel=function(){var e=this;e.Locates=function(e){for(var o,t=0;t<locations.length;t++)locations[t].Name==e.Name&&(o=markers[t],google.maps.event.trigger(o,"click"))},e.query=ko.observable(""),e.search=ko.computed(function(){return ko.utils.arrayFilter(locations,function(o){return o.Name.toLowerCase().indexOf(e.query().toLowerCase())>=0?(o.marker.setVisible(!0),console.log(o),!0):(o.marker.setVisible(!1),!1)})})},menu=document.querySelector("#menu"),main=document.querySelector("main"),drawer=document.querySelector("#drawer");menu.addEventListener("click",function(e){drawer.classList.toggle("open"),e.stopPropagation()}),main.addEventListener("click",function(){drawer.classList.remove("open")});